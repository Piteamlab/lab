<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Dangnhap.css">
    <title>Document</title>
</head>
<body>
  <header>
    <h1>Pitechlab</h1>
    <nav>
      <a href="pitech.html">Trang chủ</a>
      <a href="gioithieu.html">Giới thiệu</a>
      <a href="thuctap.html">Thực tập</a>
      <a href="baigiang.html">Bài giảng</a>
      <a href="ngiencuu.html">Nghiên cứu</a>
      <a href="sanpham.html">Sản phẩm</a>
      <a href="sukien.html">Sự kiện</a>
      <a href="Dangnhap.html" style="color: #00ffff; font-weight: 600;">Đăng nhập</a>
    </nav>
  </header>
  <div class="log"> 
    <div class="login-container" >
      <h2>Đăng nhập</h2>
      <form id="loginForm"  method="POST" action="login.php">
        <div class="form-group">
          <label for="username" class="username">Tên đăng nhập</label>
          <input type="text" id="username" name="username" placeholder="Nhập tên đăng nhập">
          <div class="error-message" id="username-error"></div> 
        </div>
        <div class="form-group">
          <label for="password" class="password">Mật khẩu</label>
          <input type="password" id="password" name="password" placeholder="Nhập mật khẩu">
          <div class="error-message" id="password-error"></div> 
        </div>
        <button type="submit" class="login-btn">Đăng nhập</button>
        <div class="Createanaccount">
          <P>Bạn chưa có tài khoản? <a href="Dangki.html">Đăng kí</a></P>
        </div>
        <div class="forgot-password">
          <a href="Laylaimatkhau.html">Quên mật khẩu?</a>
        </div>
      </form>
    </div>
  </div>
  <footer>
    © 2025 Pitechlab. All rights reserved. <br>
    Địa chỉ: số 25 ngõ 24 Hoàng Quốc Việt - Nghĩa Đô - Cầu Giấy - Hà Nội <br>
    SĐT: 0123456789 <br>
    email: pitech@gmail.com <br>
    website: pitech
  </footer>
  
  <script>
    
    
  const form = document.getElementById('loginForm');

  form.addEventListener('submit', function(event) {
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const usernameError = document.getElementById('username-error');
    const passwordError = document.getElementById('password-error');

    let isValid = true;

    if (usernameInput.value.trim() === '') {
      usernameError.textContent = 'Bạn chưa nhập tài khoản';
      usernameError.style.display = 'block';
      isValid = false;
    } else {
      usernameError.textContent = '';
      usernameError.style.display = 'none';
    }

    if (passwordInput.value.trim() === '') {
      passwordError.textContent = 'Bạn chưa nhập mật khẩu';
      passwordError.style.display = 'block';
      isValid = false;
    } else {
      passwordError.textContent = '';
      passwordError.style.display = 'none';
    }

    // Chỉ ngăn submit khi không hợp lệ
    if (!isValid) {
      event.preventDefault();
      const role = "Sinh viên";

        localStorage.setItem("tenDangNhap", usernameInput.value);
        localStorage.setItem("userRole", role);

        if (!localStorage.getItem("createdDate")) {
          const today = new Date().toLocaleDateString("vi-VN");
          localStorage.setItem("createdDate", today);
        }

        window.location.href = "trangcanhan.html";
      }
    
    // Nếu hợp lệ thì form sẽ tự động gửi tới login.php

        function onLoginSuccess() {
  // Ghi nhận đăng nhập
  localStorage.setItem("isLoggedIn", "true");

  // Lấy trang cần quay lại
  const redirect = localStorage.getItem("redirectAfterLogin") || "baigiang.html";
  localStorage.removeItem("redirectAfterLogin");

  // Chuyển hướng
  window.location.href = redirect;
}
    });
    
  </script>
</body>
</html>